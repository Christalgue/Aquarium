<html>
  <head>
    <title>Aquarium</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <script src="https://code.jquery.com/jquery-1.12.1.min.js"></script>
    <script src="https://code.highcharts.com/stock/highstock.js"></script>
    <script src="./data.js"></script>
    <script>
        $(function() {
            for (i = 0; i < MEASURE_SERIES.length; i++) {
                MEASURE_SERIES[i].data.reverse();
            }

            Highcharts.setOptions({
                global: {
                    useUTC: false
                },
                lang: {
                    loading: 'Chargement...',
                    months: ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'],
                    weekdays: ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'],
                    shortMonths: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Jui', 'Juil', 'Août', 'Sep', 'Oct', 'Nov', 'Déc'],
                    thousandsSep: " ",
                    decimalPoint: ','
                }
            });
			
            var chart = Highcharts.stockChart('container', {
                chart: {
                    type: 'spline'
                },
                title: {
                    text: 'Graphique des données capteur'
                },
                subtitle: {
                    text: ''
                },
                rangeSelector: {
                    selected: 1,
                    buttons: [{
                            type: 'hour',
                            count: 1,
                            text: '1h'
                    }, {
                            type: 'hour',
                            count: 3,
                            text: '3h'
                    }, {
                            type: 'hour',
                            count: 6,
                            text: '6h'
                    }, {
                            type: 'hour',
                            count: 12,
                            text: '12h'
                    }, {
                            type: 'day',
                            count: 1,
                            text: '1d'
                    }, {
                            type: 'week',
                            count: 1,
                            text: '1w'
                    }, {
                            type: 'month',
                            count: 1,
                            text: '1m'
                    }, {
                            type: 'all',
                            text: 'All'
                    }]
                },
                legend: {
                    enabled: true,
                },
                xAxis: {
                    type: 'datetime',
                    ordinal: false,
                    /*dateTimeLabelFormats: { // don't display the dummy year
                    month: '%e. %b',
                    year: '%b'
                    },*/
                    title: {
                        text: 'Date'
                    }
                },
                yAxis: {
                    /*title: {
                    text: 'Valeur capteur'
                    },
                    min: -10,
                    max: 40*/
                },
                plotOptions: {
                    series: {
                        gapSize: 10
                    }
                },
                series: MEASURE_SERIES/*,
				
				responsive: {
					rules: [{
						condition: {
							maxWidth: 500
						},
						chartOptions: {
							legend: {
								align: 'center',
								verticalAlign: 'bottom',
								layout: 'horizontal'
							},
							yAxis: {
								labels: {
									align: 'left',
									x: 0,
									y: -5
								},
								title: {
									text: null
								}
							},
							subtitle: {
								text: null
							},
							credits: {
								enabled: false
							}
						}
					}]
				}*/
            });
			
			chart.setSize(undefined,800);			
			/*
			$('#resizer').resizable({
				// On resize, set the chart size to that of the
				// resizer minus padding. If your chart has a lot of data or other
				// content, the redrawing might be slow. In that case, we recommend
				// that you use the 'stop' event instead of 'resize'.
				resize: function () {
						chart.setSize(
						this.offsetWidth - 20,
						this.offsetHeight - 20,
						false
					);
				}
			});
			/*
			$('#small').click(function () {
				chart.setSize(400, 300);
			});

			$('#large').click(function () {
				chart.setSize(600, 300);
			});*/

        });

    </script>
  </head>
  <body>
    <h1 style="text-align: center;">Aquarium - Données récentes</h1>
    <div id="container" style="width:100%; height:400px;"></div>
  </body>
</html>

